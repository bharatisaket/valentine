<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Love Eras Tour</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Sacramento&family=UnifrakturMaguntia&family=Libre+Barcode+39+Text&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Montserrat', sans-serif; overflow: hidden; cursor: default; }

        /* --- CURSORS --- */
        body { cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>‚ú®</text></svg>") 16 16, auto; }
        #yesBtn { cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>üíò</text></svg>") 16 16, pointer; }
        body.near-danger-zone { cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>üíî</text></svg>") 16 16, not-allowed !important; }

        /* --- LAYOUT UTILS --- */
        .screen { 
            display: none; height: 100vh; width: 100vw; 
            flex-direction: column; 
            justify-content: flex-start; align-items: center; 
            text-align: center; 
            position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 0.8s ease-in-out; z-index: 1; 
            padding-top: 5vh; box-sizing: border-box;
        }
        .active { display: flex; opacity: 1; z-index: 2; }

        button {
            padding: 15px 40px; font-size: 1.2rem; border: none; border-radius: 50px;
            font-family: 'Montserrat', sans-serif; font-weight: 700; letter-spacing: 1px;
            transition: transform 0.2s, box-shadow 0.3s;
            cursor: pointer;
        }
        button:active { transform: scale(0.95); }

        .lyric-board {
            width: 85%; max-width: 600px; min-height: 80px;
            background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 15px; 
            padding: 20px; 
            margin-top: 20px; margin-bottom: 20px;
            display: flex; align-items: center; justify-content: center;
            color: #fff; font-size: 1.2rem; font-weight: 600; font-style: italic;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
            z-index: 5;
        }

        #string-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; opacity: 0; transition: opacity 1s; }

        /* --- SCREEN 0: INTRO --- */
        #screen0 { 
            background-color: #000; color: #fff; 
            justify-content: center; /* Center vertically */
            padding-top: 0; /* Reset padding for centering */
            background-image: url('https://media.giphy.com/media/l0HlHFRbmaZtBRhXG/giphy.gif'); 
            background-size: cover; background-position: center;
        }
        #screen0::before {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: -1;
        }
        #screen0 h1 {
            font-family: 'UnifrakturMaguntia', cursive; font-size: 4rem; 
            letter-spacing: 2px; margin-bottom: 40px;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
        }
        .start-btn { 
            background: rgba(0,0,0,0.5); border: 2px solid #fff; color: #fff; 
            font-family: 'Montserrat', sans-serif; font-weight: 800; font-size: 1.5rem; 
            padding: 20px 60px;
            box-shadow: 0 0 20px rgba(255,255,255,0.2); animation: pulse 2s infinite; 
            backdrop-filter: blur(5px);
        }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255,255,255, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(255,255,255, 0); } 100% { box-shadow: 0 0 0 0 rgba(255,255,255, 0); } }

        /* --- SCREEN 1: REPUTATION --- */
        #screen1 { background: radial-gradient(circle at center, #333 0%, #000 100%); color: #fff; justify-content: center; }
        #screen1 h1 { font-family: 'UnifrakturMaguntia', cursive; font-size: 3.5rem; letter-spacing: 3px; margin-bottom: 20px; }
        
        .input-box { background: transparent; border: none; border-bottom: 2px solid #d4af37; color: #d4af37; font-size: 1.5rem; text-align: center; padding: 10px; margin: 20px 0; outline: none; font-family: 'Montserrat', sans-serif; }
        .input-box::placeholder { color: rgba(212, 175, 55, 0.5); font-style: italic; font-size: 1.2rem; }
        .enter-btn { background: #111; color: #d4af37; border: 1px solid #d4af37; text-transform: uppercase; }
        .enter-btn:hover { background: #d4af37; color: #000; }

        /* --- SCREEN 2: LOVER --- */
        #screen2 { 
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%); 
            color: #d63384; 
        }
        #screen2 h1 { 
            font-family: 'Sacramento', cursive; font-size: clamp(3rem, 8vw, 5rem); 
            line-height: 1.1; margin-bottom: 10px; z-index: 10;
            text-shadow: 2px 2px 0px rgba(255,255,255,0.6); 
        }
        #screen2 .lyric-board { background: rgba(255, 255, 255, 0.4); color: #d63384; border-color: #fff; }
        
        .interaction-zone { position: absolute; bottom: 0; left: 0; width: 100%; height: 60%; z-index: 15; }
        #yesBtn { 
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e); color: white; box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4); 
            z-index: 20; font-size: 1.5rem; padding: 20px 50px;
            position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);
        }
        #noBtn { 
            background: white; color: #555; border: 1px solid #ddd; z-index: 20; 
            font-size: 1rem; padding: 10px 20px;
            position: absolute; top: 65%; left: 50%; transform: translate(-50%, -50%);
            transition: left 0.2s ease-out, top 0.2s ease-out;
        }

        /* --- SCREEN 3: TICKET --- */
        #screen3 { background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e); color: #d4af37; justify-content: center; }
        .ticket { background: #fffdf5; width: 85%; max-width: 350px; border-radius: 15px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); overflow: hidden; display: flex; flex-direction: column; position: relative; transform: rotate(-2deg); border: 2px solid #d4af37; }
        .ticket-header { background: linear-gradient(45deg, #d4af37, #f3e5ab, #d4af37); padding: 15px; color: #5a4a42; text-transform: uppercase; font-weight: 800; letter-spacing: 2px; border-bottom: 2px dashed #5a4a42; }
        
        /* RESTORED SPECIFIC GIF FOR SCREEN 3 */
        .ticket-img { 
            width: 100%; height: 200px; object-fit: cover; 
            background-image: url('https://media.giphy.com/media/xT0Cyhi8GCSU91PvtC/giphy.gif'); 
            background-size: cover; background-position: center; 
        }
        
        .ticket-body { padding: 20px; text-align: left; color: #333; }
        .ticket-row { display: flex; justify-content: space-between; margin-bottom: 15px; }
        .label { font-size: 0.7rem; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 3px; }
        .value { font-size: 1.1rem; font-weight: 800; color: #333; }
        .barcode { font-family: 'Libre Barcode 39 Text', cursive; font-size: 2.5rem; text-align: center; opacity: 0.8; margin-top: 10px; }
        #screen3 .lyric-board { color: #d4af37; border-color: #d4af37; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <svg id="string-layer"><line id="goldenLine" x1="0" y1="0" x2="0" y2="0" stroke="#d4af37" stroke-width="3" stroke-dasharray="10,5" stroke-linecap="round" /></svg>
    <audio id="song1" loop preload="auto"><source src="song1.mp3" type="audio/mpeg"></audio>
    <audio id="song2" loop preload="auto"><source src="song2.mp3" type="audio/mpeg"></audio>
    <audio id="song3" loop preload="auto"><source src="song3.mp3" type="audio/mpeg"></audio>

    <div id="screen0" class="screen active"> 
        <h1>Are you ready, Swiftie?</h1>
        <button class="start-btn" onclick="enterSite()">YES</button> 
    </div>

    <div id="screen1" class="screen">
        <h1 style="margin-bottom: 30px;">Are you ready for it?</h1>
        <div id="lyrics1" class="lyric-board">...</div> 
        <input type="text" id="nameInput" class="input-box" placeholder="Enter your name">
        <button class="enter-btn" onclick="goToScreen2()">UNLOCK VAULT</button>
    </div>

    <div id="screen2" class="screen">
        <h1>Will you be my Valentine?</h1>
        <div id="lyrics2" class="lyric-board">...</div> 
        
        <div class="interaction-zone" id="interactionZone">
            <button id="yesBtn" onclick="goToScreen3()">YES!</button>
            <button id="noBtn">No</button>
        </div>
    </div>

    <div id="screen3" class="screen">
        <h1 style="font-size: 1.8rem; margin-bottom: 20px; color: #d4af37;">Checkmate! ‚ôüÔ∏è</h1>
        <div class="ticket">
            <div class="ticket-header">The Love Eras Tour</div>
            <div class="ticket-img"></div>
            <div class="ticket-body">
                <div class="ticket-row"> <div><div class="label">Date</div><div class="value">Feb 14, 2026</div></div> <div><div class="label">Time</div><div class="value">07:00 PM</div></div> </div>
                <div class="ticket-row"> <div><div class="label">Venue</div><div class="value">Your Fav Restaurant</div></div> </div>
                 <div class="ticket-row"> <div><div class="label">Admit</div><div class="value">Two (2)</div></div> <div><div class="label">Section</div><div class="value">VIP</div></div> </div>
                <div class="barcode">VALENTINE2026</div>
            </div>
        </div>
        <div id="lyrics3" class="lyric-board" style="margin-top:20px; font-size: 1rem;">...</div> 
    </div>

    <script>
        // === LRC DATA ===
        const RAW_LRC_1 = `[00:11.26]Knew he was a killer\n[00:12.76]First time that I saw him\n[00:14.35]Wonder how many girls he had loved and left haunted\n[00:17.31]But if he's a ghost, then\n[00:18.94]I can be a phantom\n[00:20.35]Holdin' him for ransom, some\n[00:22.94]Some boys are tryin' too hard,\n[00:24.82]He don't try at all though\n[00:26.36]Younger than my exes,\n[00:27.78]But he act like such a man, so\n[00:29.45]I see nothing better,\n[00:30.86]I keep him forever\n[00:32.36]Like a vendetta-ta\n[00:34.91]I, i, I see how this is gon' go\n[00:38.62]Touch me\n[00:39.58]And you'll never be alone\n[00:41.12]I-island breeze\n[00:42.79]And lights down low\n[00:44.00]No one has to know\n[00:46.17]\n[00:46.84]In the middle of the night\n[00:49.05]In my dreams\n[00:50.80]\n[00:52.51]You should see the things we do\n[00:55.10]Baby\n[00:57.02]\n[00:58.85]In the middle of the night,\n[01:01.06]In my dreams\n[01:02.81]\n[01:04.23]I know I'm gonna be with you\n[01:06.44]So I take my time\n[01:10.53]\n[01:10.99]Are you ready for it?\n[01:12.10]\n[01:17.58]Knew I was a robber\n[01:18.91]First time that he saw me\n[01:20.33]Stealing hearts and running off\n[01:21.87]And never sayin' sorry\n[01:23.42]But if I'm a thief,\n[01:24.50]Then he can join the heist, and\n[01:26.34]We'll move to an island, and\n[01:28.96]And he can be my jailer\n[01:31.01]Burton to this taylor\n[01:32.42]Every love I've known in comparison is a failure\n[01:35.34]I forget their names now\n[01:36.97]I'm so very tame now\n[01:38.52]Never be the same now, now\n[01:41.10]I, i, I see how this is gon' go\n[01:44.52]\n[01:44.85]Touch me\n[01:45.81]And you'll never be alone\n[01:46.98]I-island breeze\n[01:48.73]And lights down low\n[01:50.28]No one has to know\n[01:52.40]\n[01:53.15]In the middle of the night\n[01:55.16]In my dreams\n[01:56.78]\n[01:58.49]You should see the things we do\n[02:01.12]Baby\n[02:02.87]\n[02:04.96]In the middle of the night\n[02:07.13]In my dreams\n[02:08.88]\n[02:10.34]I know I'm gonna be with you\n[02:12.42]So I take my time\n[02:16.55]\n[02:16.97]Are you ready for it?\n[02:18.05]\n[02:23.06]Are you ready for it?\n[02:24.27]Baby, let the games begin\n[02:26.19]Let the games begin\n[02:27.44]\n[02:27.77]Let the games begin\n[02:29.44]\n[02:30.40]Baby, let the games begin\n[02:32.48]Let the games begin\n[02:33.61]\n[02:33.90]Let the games begin\n[02:35.03]I, i, I see how this is gon' go\n[02:38.45]\n[02:38.82]Touch me\n[02:39.78]And you'll never be alone\n[02:41.04]I-island breeze\n[02:42.74]And lights down low\n[02:44.16]No one has to know\n[02:45.100]\n[02:48.67]In the middle of the night\n[02:50.75]In my dreams\n[02:52.09]\n[02:54.09]You should see the things we do\n[02:56.72]Baby\n[02:58.47]\n[03:00.39]In the middle of the night\n[03:02.76]In my dreams\n[03:04.73]\n[03:06.02]I know I'm gonna be with you\n[03:08.10]So I take my time\n[03:12.44]In the middle of the night\n[03:13.86]Baby, let the games begin\n[03:15.82]Let the games begin\n[03:17.03]\n[03:17.32]Let the games begin\n[03:18.57]Are you ready for it?\n[03:19.74]Baby, let the games begin\n[03:21.78]Let the games begin\n[03:23.37]Let the games begin\n[03:24.50]Are you ready for it?`;
        const RAW_LRC_2 = `[00:00.00]by RentAnAdviser.com\n[00:00.00]\n[00:06.10]Fever dream high in the quiet of the night\n[00:08.70]You know that I caught it (Oh yeah, you're right, I want it)\n[00:11.80]Bad, bad boy, shiny toy with a price\n[00:14.30]You know that I bought it (Oh yeah, you're right, I want it)\n[00:16.80]Killing me slow, out the window\n[00:19.50]I'm always waiting for you to be waiting below\n[00:22.40]Devils roll the dice, angels roll their eyes\n[00:25.10]What doesn't kill me makes me want you more\n[00:27.80]And it's new, the shape of your body\n[00:31.40]It's blue, the feeling I've got\n[00:34.10]And it's ooh, whoa oh\n[00:37.20]It's a cruel summer\n[00:40.00]It's cool, that's what I tell 'em\n[00:42.60]No rules in breakable heaven\n[00:45.40]But ooh, whoa oh\n[00:48.40]It's a cruel summer\n[00:51.10]With you\n[00:52.80]\n[00:54.20]Hang your head low in the glow of the vending machine\n[00:57.40]I'm not dying (Oh yeah, you're right, I want it)\n[00:59.80]We say that we'll just screw it up in these trying times\n[01:02.90]We're not trying (Oh yeah, you're right, I want it)\n[01:04.70]So cut the headlights, summer's a knife\n[01:07.40]I'm always waiting for you just to cut to the bone\n[01:10.30]Devils roll the dice, angels roll their eyes\n[01:13.10]And if I bleed, you'll be the last to know\n[01:15.90]Oh, it's new, the shape of your body\n[01:19.40]It's blue, the feeling I've got\n[01:22.10]And it's ooh, whoa oh\n[01:25.10]It's a cruel summer\n[01:27.90]It's cool, that's what I tell 'em\n[01:30.70]No rules in breakable heaven\n[01:33.50]But ooh, whoa oh\n[01:36.30]It's a cruel summer\n[01:39.10]With you\n[01:39.70]I'm drunk in the back of the car\n[01:41.80]And I cried like a baby coming home from the bar (Oh)\n[01:44.60]Said, I'm fine, but it wasn't true\n[01:47.40]I don't wanna keep secrets just to keep you\n[01:50.40]And I snuck in through the garden gate\n[01:53.00]Every night that summer just to seal my fate (Oh)\n[01:55.90]And I scream, For whatever it's worth\n[01:58.80]I love you, ain't that the worst thing you ever heard?\n[02:02.50]He looks up, grinning like a devil\n[02:04.60]And it's new, the shape of your body\n[02:07.30]It's blue, the feeling I've got\n[02:10.00]And it's ooh, whoa oh\n[02:13.20]It's a cruel summer\n[02:15.80]It's cool, that's what I tell 'em\n[02:18.60]No rules in breakable heaven\n[02:21.40]But ooh, whoa oh\n[02:24.30]It's a cruel summer\n[02:27.00]With you\n[02:27.70]I'm drunk in the back of the car\n[02:29.80]And I cried like a baby coming home from the bar (Oh)\n[02:32.60]Said, I'm fine, but it wasn't true\n[02:35.40]I don't wanna keep secrets just to keep you\n[02:38.50]And I snuck in through the garden gate\n[02:41.10]Every night that summer just to seal my fate (Oh)\n[02:43.80]And I scream, For whatever it's worth\n[02:46.70]I love you, ain't that the worst thing you ever heard?`;
        const RAW_LRC_3 = `[00:00.00]by RentAnAdviser.com\n[00:00.00]\n[00:08.30]Once upon a time, the planets and the fates\n[00:13.10]And all the stars aligned\n[00:16.50]You and I ended up in the same room\n[00:20.60]At the same time\n[00:23.20]\n[00:24.20]And the touch of a hand lit the fuse\n[00:27.90]Of a chain reaction of countermoves\n[00:31.70]To assess the equation of you\n[00:35.40]Checkmate, I couldn't lose\n[00:38.30]What if I told you none of it was accidental?\n[00:41.60]And the first night that you saw me\n[00:43.40]Nothing was gonna stop me\n[00:45.40]I laid the groundwork, and then\n[00:47.80]Just like clockwork\n[00:49.50]The dominoes cascaded in a line\n[00:51.70]What if I told you I'm a mastermind?\n[00:54.90]\n[00:56.40]And now you're mine\n[00:59.30]\n[01:00.10]It was all by d–µsign\n[01:02.50]\n[01:04.10]'Cause I'm a mastermind\n[01:06.60]\n[01:08.40]You see, all the wis–µst women\n[01:13.30]Had to do it this way\n[01:16.40]\n[01:17.50]'Cause we were born to be the pawn\n[01:20.70]In every lover's game\n[01:24.20]\n[01:25.10]If you fail to plan, you plan to fail\n[01:28.80]Strategy sets the scene for the tale\n[01:32.50]I'm the wind in our free-flowing sails\n[01:36.70]\n[01:37.10]And the liquor in our cocktails\n[01:39.10]What if I told you none of it was accidental?\n[01:42.60]And the first night that you saw me\n[01:44.30]I knew I wanted your body\n[01:46.50]I laid the groundwork, and then\n[01:48.70]Just like clockwork\n[01:50.20]The dominoes cascaded in a line\n[01:52.60]What if I told you I'm a mastermind?\n[01:55.40]\n[01:57.80]And now you're mine\n[02:00.20]\n[02:01.00]It was all my design\n[02:03.20]\n[02:04.90]'Cause I'm a mastermind\n[02:08.30]\n[02:10.20]No one wanted to play with me as a little kid\n[02:13.80]So I've been scheming like a criminal ever since\n[02:17.30]To make them love me and make it seem effortless\n[02:21.40]This is the first time I've felt the need to confess\n[02:24.70]And I swear\n[02:27.70]I'm only cryptic and Machiavellian\n[02:30.70]'Cause I care\n[02:32.90]So I told you none of it was accidental\n[02:35.80]And the first night that you saw me\n[02:37.70]Nothing was gonna stop me\n[02:39.70]I laid the groundwork, and then\n[02:42.10]Saw a wide smirk on your face\n[02:44.40]You knew the entire time\n[02:46.40]You knew that I'm a mastermind\n[02:49.60]\n[02:51.00]And now you're mine\n[02:53.40]\n[02:54.40]Yeah, all you did was smile\n[02:57.50]\n[02:58.10]'Cause I'm a mastermind`;

        const S1_START = 33.0; 
        const S2_START = 58.0; 
        const S3_START = 38.3; 

        function parseLRC(lrcText) {
            const lines = lrcText.split('\n');
            const result = [];
            for (let line of lines) {
                const match = line.match(/\[(\d{2}):(\d{2}\.\d{2})\](.*)/);
                if (match) {
                    const min = parseInt(match[1]);
                    const sec = parseFloat(match[2]);
                    const text = match[3].trim();
                    const totalTime = (min * 60) + sec;
                    result.push([totalTime, text]);
                }
            }
            return result;
        }

        const lyricsData = {
            song1: parseLRC(RAW_LRC_1),
            song2: parseLRC(RAW_LRC_2),
            song3: parseLRC(RAW_LRC_3)
        };

        const s1 = document.getElementById('song1');
        const s2 = document.getElementById('song2');
        const s3 = document.getElementById('song3');
        s1.volume = 0.5; s2.volume = 0.4; s3.volume = 0.6;

        let screen2Active = false;

        // --- PRE-SEEK LOGIC ---
        window.addEventListener('load', () => {
            s1.currentTime = S1_START;
        });

        function setupKaraoke(audioId, displayId, dataKey) {
            const audio = document.getElementById(audioId);
            const display = document.getElementById(displayId);
            setInterval(() => {
                if(audio.paused) return;
                const t = audio.currentTime;
                const lyrics = lyricsData[dataKey];
                let currentLine = "..."; 
                for (let i = 0; i < lyrics.length; i++) {
                    if (t >= lyrics[i][0]) currentLine = lyrics[i][1];
                }
                if (display.innerText !== currentLine) display.innerText = currentLine;
            }, 50);
        }
        setupKaraoke('song1', 'lyrics1', 'song1');
        setupKaraoke('song2', 'lyrics2', 'song2');
        setupKaraoke('song3', 'lyrics3', 'song3');

        function enterSite() {
            s1.play().then(() => {
                switchScreen('screen0', 'screen1');
            }).catch(e => {
                console.log(e);
                switchScreen('screen0', 'screen1'); 
            });
        }
        function goToScreen2() {
            if(document.getElementById('nameInput').value.trim() === "") { alert("Enter your name!"); return; }
            s1.pause();
            s2.currentTime = S2_START;
            s2.play().catch(e => console.log(e));
            switchScreen('screen1', 'screen2');
            document.getElementById('string-layer').style.opacity = 1;
            isStringActive = true;
            screen2Active = true; 
        }
        function goToScreen3() {
            screen2Active = false; 
            document.body.classList.remove('near-danger-zone');
            s2.pause();
            s3.currentTime = S3_START;
            s3.play().catch(e => console.log(e));
            switchScreen('screen2', 'screen3');
            launchConfetti();
            document.getElementById('string-layer').style.opacity = 0;
            isStringActive = false;
        }
        function switchScreen(fromId, toId) {
            const fromEl = document.getElementById(fromId);
            const toEl = document.getElementById(toId);
            fromEl.style.opacity = 0;
            setTimeout(() => {
                fromEl.classList.remove('active');
                toEl.classList.add('active');
                setTimeout(() => toEl.style.opacity = 1, 50);
            }, 800);
        }
        
        const svgLine = document.getElementById('goldenLine');
        const yesBtn = document.getElementById('yesBtn');
        let isStringActive = false;
        function updateLine(x, y) {
            if (!isStringActive) return;
            const rect = yesBtn.getBoundingClientRect();
            svgLine.setAttribute('x1', x); svgLine.setAttribute('y1', y);
            svgLine.setAttribute('x2', rect.left + rect.width / 2);
            svgLine.setAttribute('y2', rect.top + rect.height / 2);
        }
        
        const noBtn = document.getElementById('noBtn');
        const interactionZone = document.getElementById('interactionZone');
        const btnLyrics = ["No", "Don't be mean!", "I knew you were trouble", "You're on your own, kid", "Wrong Era!", "Try again!"];
        let lyricIndex = 0;

        document.addEventListener('mousemove', (e) => {
            updateLine(e.clientX, e.clientY);

            if (screen2Active) {
                const noRect = noBtn.getBoundingClientRect();
                const dx = Math.max(noRect.left - e.clientX, 0, e.clientX - noRect.right);
                const dy = Math.max(noRect.top - e.clientY, 0, e.clientY - noRect.bottom);
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < 80) { // Warning Zone
                    document.body.classList.add('near-danger-zone');
                    if (dist < 30) { // Danger Zone
                        moveButton();
                    }
                } else {
                    document.body.classList.remove('near-danger-zone');
                }
            }
        });
        document.addEventListener('touchmove', (e) => updateLine(e.touches[0].clientX, e.touches[0].clientY));

        function moveButton() {
            const zoneRect = interactionZone.getBoundingClientRect();
            const yesRect = yesBtn.getBoundingClientRect();
            let newX, newY, safe = false;
            let attempts = 0;

            while (!safe && attempts < 20) {
                newX = Math.random() * (zoneRect.width - noBtn.offsetWidth);
                newY = Math.random() * (zoneRect.height - noBtn.offsetHeight);
                const noAbsX = zoneRect.left + newX;
                const noAbsY = zoneRect.top + newY;
                const noW = noBtn.offsetWidth;
                const noH = noBtn.offsetHeight;

                if (
                    noAbsX < yesRect.right + 20 &&
                    noAbsX + noW > yesRect.left - 20 &&
                    noAbsY < yesRect.bottom + 20 &&
                    noAbsY + noH > yesRect.top - 20
                ) {
                    safe = false; 
                } else {
                    safe = true; 
                }
                attempts++;
            }
            noBtn.style.position = "absolute";
            noBtn.style.left = `${newX}px`;
            noBtn.style.top = `${newY}px`;
            noBtn.style.transform = "none"; 
            
            lyricIndex = (lyricIndex + 1) % btnLyrics.length;
            noBtn.innerText = btnLyrics[lyricIndex];
        }
        
        function launchConfetti() {
            var duration = 3000; var end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#d4af37', '#ffffff'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#d4af37', '#ffffff'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }
    </script>
</body>
</html>